{% extends "layout.html" %}

{% block title %}
    Directory
{% endblock %}

{% block main %}
<h1>Directory</h1>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

<table>
    <tr>
        <th>Stories</th>
        <th>Add to favorites</th>
    </tr>
    <tr>
        <td>Bloody Mary</td>
        <td><button class="addToFavBtn">&#10084;</button></td>
    </tr>
    <tr>
        <td href="https://www.hauntedrooms.co.uk/the-bloody-mary-legend">Bloody Mary</td>
        <td><button class="addToFavBtn">&#10084;</button></td>
    </tr>
</table>

<script>

    $('.addToFavBtn').on('click', event => {
  var storyName = $(event.target).parents()[1].firstElementChild.innerHTML;

  var favorites = localStorage.getItem("favorites");
  if (!favorites){
    localStorage.setItem("favorites", JSON.stringify({stores:[]}));
    favorites = JSON.parse(localStorage.getItem("favorites"));
  }else{
    favorites = JSON.parse(favorites);
  }
  
  favorites.stores.push(storeName);

  localStorage.setItem("favorites", JSON.stringify(favorites));

});

    
</script>
